{% extends 'diary/base.html' %}

{% block content %}
<h1 class="text-center"> –ú–æ—è –∫–Ω–∏–∂–Ω–∞—è –ø–æ–ª–∫–∞ </h1>

<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
<form method="GET" action="{% url 'book_list' %}" class="mb-3">
    <input type="text" name="q" value="{{ query }}" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –∞–≤—Ç–æ—Ä–∞">
    <button type="submit">üîç –ü–æ–∏—Å–∫</button>
</form>

<a href="{% url 'book_create' %}" class="btn btn-success mb-3">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</a>

<div class="bookshelf">
  <h3>üìö –ú–æ–∏ –∫–Ω–∏–≥–∏</h3>
  {% if books %}
    <div class="books-grid">
    {% for book in books %}
      <div class="book-card" style="background-color: {{ colors|random }};">
        <!-- –ü–µ—Ä–µ–Ω–æ—Å–∏–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–≤–µ—Ä—Ö -->
        <div class="book-actions">
        
          {% if book.file %}
            <p>üìÇ <a href="{{ book.file.url }}" download>–°–∫–∞—á–∞—Ç—å –∫–Ω–∏–≥—É</a></p>
          {% endif %}

        </div>

        <!-- –°—Å—ã–ª–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å—é –∫–∞—Ä—Ç–æ—á–∫—É, –¥–µ–ª–∞–µ—Ç –µ—ë –Ω–µ–≤–∏–¥–∏–º–æ–π, –Ω–æ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π -->
        <a href="{% url 'book_detail' book.pk %}" class="book-link">
          <div class="book-cover">
            {% if book.cover_image %}
              <img src="{{ book.cover_image.url }}" alt="–û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏">
            {% else %}
              <img src="https://kniga.lv/icache/b99834bc/67860a1c/0359cbdd.jpg" alt="–û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏">
            {% endif %}
          </div>
          <div class="book-info">
            <h5>{{ book.name }}</h5>
            <p class="mb-1 text-muted book-author">{{ book.author }}</p>
            <small class="text-muted">{{ book.get_genre_display }}</small>
          </div>
        </a>
      </div>
    {% endfor %}
    </div>
  {% else %}
    <p class="text-center">–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –∫–Ω–∏–≥–∏.</p>
  {% endif %}
</div>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ OpenLibrary -->
{% include 'diary/openlibrary_results.html' %}

{% endblock %}
