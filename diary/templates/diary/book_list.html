{% extends 'diary/base.html' %}

{% block content %}
<h1 class="text-center">–ú–æ—è –∫–Ω–∏–∂–Ω–∞—è –ø–æ–ª–∫–∞</h1>

<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
<form method="GET" action="{% url 'book_list' %}" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" value="{{ query }}" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –º–æ–∏–º –∫–Ω–∏–≥–∞–º">
        <button type="submit" class="btn btn-primary">üîç –ü–æ–∏—Å–∫</button>
    </div>
</form>

<a href="{% url 'book_create' %}" class="btn btn-success mb-3">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</a>

<!-- –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
<div class="bookshelf">
  <h3>üìö –ú–æ–∏ –∫–Ω–∏–≥–∏</h3>
  {% if books %}
    <div class="books-grid">
    {% for book in books %}
      <div class="book-card" style="background-color: {{ colors|random }};">
        <div class="book-cover">
            {% if book.cover_image %}
                <img src="{{ book.cover_image.url }}" alt="–û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏">
            {% else %}
                <img src="https://via.placeholder.com/150" alt="–ù–µ—Ç –æ–±–ª–æ–∂–∫–∏">
            {% endif %}
        </div>
        <div class="book-info">
            <h5>{{ book.name }}</h5>
            <p class="mb-1 text-muted book-author">{{ book.author }}</p>
            {% if book.year %}
                <p class="mb-1 text-muted">{{ book.year }}</p>
            {% endif %}
        </div>
        <div class="book-actions">
            <a href="{% url 'book_edit' book.id %}" class="btn btn-sm btn-primary">‚úèÔ∏è</a>
            <a href="{% url 'book_delete' book.id %}" class="btn btn-sm btn-danger">üóëÔ∏è</a>
        </div>
      </div>
    {% endfor %}
    </div>
  {% else %}
    <p class="text-center">–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –∫–Ω–∏–≥–∏.</p>
  {% endif %}
</div>

{% endblock %}
