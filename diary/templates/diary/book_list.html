{% extends 'diary/base.html' %}

{% block content %}
<h1 class="text-center">–ú–æ—è –∫–Ω–∏–∂–Ω–∞—è –ø–æ–ª–∫–∞</h1>

<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
<form class="search-form" method="get">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –º–æ–∏–º –∫–Ω–∏–≥–∞–º..." value="{{ request.GET.q }}">
        <button class="btn btn-primary search-button" type="submit">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="currentColor"/>
            </svg>
        </button>
    </div>
</form>

<a href="{% url 'book_create' %}" class="btn btn-success mb-3">
    <svg class="add-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
    </svg>
    –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É
</a>

<!-- –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
<div class="bookshelf">
  <h3>üìö –ú–æ–∏ –∫–Ω–∏–≥–∏</h3>
  {% if books %}
    <div class="books-grid">
    {% for book in books %}
      <div class="book-card" style="background-color: {{ colors|random }};">
        <div class="book-cover">
            {% if book.cover_image %}
                <img src="{{ book.cover_image.url }}" alt="–û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏">
            {% else %}
                <img src="https://via.placeholder.com/150" alt="–ù–µ—Ç –æ–±–ª–æ–∂–∫–∏">
            {% endif %}
        </div>
        <div class="book-info">
            <h5>{{ book.name }}</h5>
            <p class="mb-1 text-muted book-author">{{ book.author }}</p>
            {% if book.year %}
                <p class="mb-1 text-muted">{{ book.year }}</p>
            {% endif %}
        </div>
        <div class="book-actions">
            <a href="{% url 'book_edit' book.id %}" class="btn btn-sm btn-primary" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                <svg class="edit-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75 1.84-1.83zM3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z" fill="currentColor"/>
                </svg>
            </a>
            <a href="{% url 'book_delete' book.id %}" class="btn btn-sm btn-danger" title="–£–¥–∞–ª–∏—Ç—å">
                <svg class="delete-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="currentColor"/>
                </svg>
            </a>
        </div>
      </div>
    {% endfor %}
    </div>
  {% else %}
    <p class="text-center">–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –∫–Ω–∏–≥–∏.</p>
  {% endif %}
</div>

{% endblock %}
